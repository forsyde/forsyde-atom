\documentclass{standalone}
\usepackage{forsyde-pc}
\usepackage{forsyde-math}
\begin{document}

\begin{tikzpicture}[nomoccolor, type style = \scriptsize\texttt]
\def\ppfunc{$\vect{2,4,8,...,2^k}$}
\comb[ni=2,no=2,nf=2,f1=bffunc,f2=w,type=comb] {p1}  {0,0} {butterfly};
\mapSG[ni=2, no=2, nf=0]                       {mp2} {(p1)}{};
\combinator[ni=1, no=2, type=duals]{v1v2}      {dua1}{$(mp2-p.i1)!.5!(mp2-p.i2)-(1,0)$};
\combinator[ni=2, no=1, type=unduals]{v2v1}    {udu1}{$(mp2-p.o1)!.5!(mp2-p.o2)+(1,0)$};
\compositestd[nf=1, f1={t}]                    {cp3}{(mp2)(dua1)(udu1)}{segment};
\mapSG[nf=1, f1={twiddles}]                    {mp1}{(cp3)}{};
\combinator[nf=1, f1={w}, type=group]{v1gv1}   {gr1}{$(mp1-p.i1)-(1,0)$};
\combinator[type=concat, reverse shape]{v1gv1} {ct1}{$(mp1-p.o1)+(1,0)$};
\compositestd[nf=1, f1={w}]                    {cp2}{(mp1)(gr1)(ct1)}{stage};
\pipe[nf=1, f1={\ppfunc}]                      {pp1}{(cp2)}{};
\combinator[type=bitrev]{v1v1}                 {br1}{$(pp1-p.o1)+(1,0)$};
\compositestd[nf=1, f1={k}]                    {cp1}{(pp1)(br1)}{fft};

\vector[] ($(pp1-p.i1)-(2,0)$) -> (pp1-p.i1);
\vector[] (br1-p.o1) -> ($(br1-p.o1)+(2,0)$);
\vector[-|-] (pp1-p.i1) -> (gr1-p.i1);
\vector[] (pp1-p.o1) -> (br1-p.i1);
\vector[-|-] (ct1-p.o1) -> (pp1-p.o1);
\vector[token=vector] (gr1-p.o1) -> (mp1-p.i1);
\vector[token=vector] (mp1-p.o1) -> (ct1-p.i1);
\vector[-|-,token=scalar] (mp1-p.i1) -> (dua1-p.i1);
\vector[-|-,token=scalar] (udu1-p.o1) -> (mp1-p.o1);
\vector[-|-] (dua1-p.o1) -> (mp2-p.i1);
\vector[-|-] (dua1-p.o2) -> (mp2-p.i2);
\vector[-|-] (mp2-p.o1) -> (udu1-p.i1);
\vector[-|-] (mp2-p.o2) -> (udu1-p.i2);
\signal[-|-] (mp2-p.i1) -> (p1-p.i1);
\signal[-|-] (mp2-p.i2) -> (p1-p.i2);
\signal[-|-] (p1-p.o1) -> (mp2-p.o1);
\signal[-|-] (p1-p.o2) -> (mp2-p.o2);

\function[|-|] (cp1-f.o1) -> (pp1-f.i1);
\function[|-|] (pp1-f.o1) -> (cp2-f.i1);
\function[|-|] (cp2-f.o1) -> (gr1-f.i1);
\function[|-|] (mp1-f.o1) -> (cp3-f.i1);
\function[|-|=.2] (cp3-f.o1) -> (p1-f.i2);
\end{tikzpicture}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
