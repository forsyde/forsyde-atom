%%%%%%%%%%%%%%%
% ENVIRONMENT %
%%%%%%%%%%%%%%%
\tikzset{global scale/.style={
    scale=#1, globsc=#1,
    every node/.style={scale=#1}
  }
}

\newif\ifnolabel
\newif\ifnocolor
\pgfkeys{
	/tikz/globsc/.store in = \globScale,
	/tikz/globsc = 1,
	/tikz/nomoccolor/.is if=nocolor,
	/tikz/nomoclabel/.is if=nolabel,
	/tikz/type style/.store in = \typeStyle,
	/tikz/type style = \scriptsize\texttt,
	/tikz/label style/.store in = \labelStyle,
	/tikz/label style = \textbf,
	/tikz/function style/.store in = \funcStyle,
	/tikz/function style = \scriptsize,
	/tikz/moc/.store in = \MoC,
	/tikz/moc = none,
	/tikz/mocin/.store in = \MoCin,
	/tikz/mocin = none,
	/tikz/mocout/.store in = \MoCout,
	/tikz/mocout = none,
	/tikz/token pos/.store in = \tokPos,
	/tikz/token pos = 0.5,
	/tikz/deviate/.store in = \pDeviate,
	/tikz/deviate = 0pt,
}

%%%%%%%%%%%%
% FAMILIES % 
%%%%%%%%%%%%
\pgfkeys{/primitive keys/.is family, /primitive keys,
 	moc/.estore in       = \pMoc,
	nf/.estore in        = \pNFunc,
	f1/.estore in        = \pFunc,
        f/.style={f1 = {#1},nf = 1, },
	default/.style = {
		moc=none, 
                nf=0, 
		f1=$ f $
	}
}


\pgfkeys{/standard leaf keys/.is family, /standard leaf keys,
 	moc/.estore in       = \pMoc,
 	type/.estore in      = \pType,
	ni/.estore in        = \pNIn,
	no/.estore in        = \pNOut,
	nf/.estore in        = \pNFunc,
	f1/.estore in        = \pFuncA,
	f2/.estore in        = \pFuncB,
	f3/.estore in        = \pFuncC,
	f4/.estore in        = \pFuncD,
	inner sep/.estore in = \pInnerSep,
	reverse/.is toggle,
	default/.style = {
		moc=none, 
		type= , 
		ni=1, no=1, nf=0, 
		f1=$ f_1 $, 
		f2=$ f_2 $, 
		f3=$ f_3 $, 
		f4=$ f_4 $, 
		inner sep=10pt,
		reverse = false
	}
}

\pgfkeys{/custom leaf keys/.is family, /custom leaf keys,
 	moc/.estore in            = \pMoc,
 	shape/.estore in          = \pShape,
	ni/.estore in             = \pNIn,
	no/.estore in             = \pNOut,
	minimum height/.estore in = \pInnerSep,
	reverse/.is toggle,
	reverse shape/.is toggle,
	default/.style = {
		moc=none, 
		shape= rectangle, 
		ni=1, no=1, 
		minimum height=20pt,
		reverse = false,
		reverse shape = false
	}
}


\pgfkeys{
	/interface keys/.is family, /interface keys,
	default/.style = {mocin = none, mocout = none, reverse = false},
 	mocin/.estore in = \pMocIn,
 	mocout/.estore in = \pMocOut,
	reverse/.is toggle,
}

\pgfkeys{/embedded moc keys/.is family, /embedded moc keys,
 	moc/.estore in            = \pMoc,
	ni/.estore in             = \pNIn,
	no/.estore in             = \pNOut,
 	inner xsep/.estore in = \innerXSep,
 	inner ysep/.estore in = \innerYSep,
	reverse/.is toggle,
	reverse shape/.is toggle,
	default/.style = {
		moc=none, 
		ni=1, no=1, 
		inner xsep = 15pt, 
		inner ysep = 15pt,
		reverse = false,
		reverse shape = false
	}
}


\pgfkeys{/composite keys/.is family, /composite keys,
	ni/.estore in         = \pNIn,
	no/.estore in         = \pNOut,
 	inner xsep/.estore in = \innerXSep,
 	inner ysep/.estore in = \innerYSep,
 	reverse/.is toggle,
	default/.style = {
		ni=0, no=0,
		inner xsep = 15pt, 
		inner ysep = 15pt, 
		reverse=false
	},
}

\pgfkeys{/applicative patterns keys/.is family, /applicative patterns keys,
 	type/.estore in       = \pType,
 	shape/.estore in      = \pShape,
	ni/.estore in         = \pNIn,
	no/.estore in         = \pNOut,
	nf/.estore in         = \pNFunc,
	f1/.estore in         = \pFuncA,
	f2/.estore in         = \pFuncB,
	f3/.estore in         = \pFuncC,
	f4/.estore in         = \pFuncD,
	inner xsep/.estore in = \innerXSep,
	inner ysep/.estore in = \innerYSep,
	reverse/.is toggle,
	reverse shape/.is toggle,
	default/.style = {
		type= ,
		shape = dp shape, 
		ni=1, no=1, nf=0, 
		f1=$ \langle f_1\rangle $, 
		f2=$ \langle f_2\rangle $, 
		f3=$ \langle f_3\rangle $, 
		f4=$ \langle f_4\rangle $, 
		inner ysep=18pt, 
		inner xsep=15pt,
		reverse = false, 
		reverse shape=false, 
	},
}

\pgfkeys{/transition patterns keys/.is family, /transition patterns keys,
 	type/.estore in       = \pType,
 	inner shape/.estore in= \pInnerShape,
	outer shape/.estore in= \pOuterShape,
	ni/.estore in         = \pNIn,
	no/.estore in         = \pNOut,
	nf/.estore in         = \pNFunc,
	f1/.estore in         = \pFuncA,
	f2/.estore in         = \pFuncB,
	f3/.estore in         = \pFuncC,
	f4/.estore in         = \pFuncD,
	reverse/.is toggle,
	reverse shape/.is toggle,
	default/.style = {
		type= ,
		inner shape = noinner, 
		outer shape = transition shape v1v1,
		ni=1, no=1, nf=0, 
		f1=$ f_1 $, 
		f2=$ f_2 $, 
		f3=$ f_3 $, 
		f4=$ f_4 $, 
		reverse = false, 
		reverse shape=false, 
	},
}

\endinput