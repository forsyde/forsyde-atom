<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<!-- Generated by HsColour, http://code.haskell.org/~malcolm/hscolour/ -->
<title>src/ForSyDe/Atom/MoC/SDF.hs</title>
<link type='text/css' rel='stylesheet' href='hscolour.css' />
</head>
<body>
<pre><a name="line-1"></a><span class='hs-comment'>{-# OPTIONS_HADDOCK prune #-}</span>
<a name="line-2"></a><span class='hs-comment'>----------------------------------------------------------------------</span>
<a name="line-3"></a><span class='hs-comment'>-- |</span>
<a name="line-4"></a><span class='hs-comment'>-- Module      :  ForSyDe.Atom.MoC.SDF</span>
<a name="line-5"></a><span class='hs-comment'>-- Copyright   :  (c) George Ungureanu, KTH/ICT/E 2015-2016</span>
<a name="line-6"></a><span class='hs-comment'>-- License     :  BSD-style (see the file LICENSE)</span>
<a name="line-7"></a><span class='hs-comment'>-- </span>
<a name="line-8"></a><span class='hs-comment'>-- Maintainer  :  ugeorge@kth.se</span>
<a name="line-9"></a><span class='hs-comment'>-- Stability   :  experimental</span>
<a name="line-10"></a><span class='hs-comment'>-- Portability :  portable</span>
<a name="line-11"></a><span class='hs-comment'>--</span>
<a name="line-12"></a><span class='hs-comment'>--</span>
<a name="line-13"></a><span class='hs-comment'>-- The @SDF@ library implements the atoms holding the sematics for the</span>
<a name="line-14"></a><span class='hs-comment'>-- synchronous data flow computation model. It also provides a set of</span>
<a name="line-15"></a><span class='hs-comment'>-- helpers for properly instantiating process network patterns as</span>
<a name="line-16"></a><span class='hs-comment'>-- process constructors.</span>
<a name="line-17"></a><span class='hs-comment'>--</span>
<a name="line-18"></a><span class='hs-comment'>-- __IMPORTANT!!!__</span>
<a name="line-19"></a><span class='hs-comment'>-- see the &lt;ForSyDe-Atom.html#naming_conv naming convention&gt; rules</span>
<a name="line-20"></a><span class='hs-comment'>-- on how to interpret, use and develop your own constructors.</span>
<a name="line-21"></a><span class='hs-comment'>----------------------------------------------------------------------</span>
<a name="line-22"></a>
<a name="line-23"></a><span class='hs-keyword'>module</span> <span class='hs-conid'>ForSyDe</span><span class='hs-varop'>.</span><span class='hs-conid'>Atom</span><span class='hs-varop'>.</span><span class='hs-conid'>MoC</span><span class='hs-varop'>.</span><span class='hs-conid'>SDF</span> <span class='hs-layout'>(</span>
<a name="line-24"></a>  
<a name="line-25"></a>  <span class='hs-comment'>-- * Synchronous data flow (@SDF@) event</span>
<a name="line-26"></a>
<a name="line-27"></a>  <span class='hs-comment'>-- | The synchronous data flow (@SDF@) MoC is the first untimed MoC</span>
<a name="line-28"></a>  <span class='hs-comment'>-- implemented by the @forsyde-atom@ framework. On untimed MoCs,</span>
<a name="line-29"></a>  <span class='hs-comment'>-- &lt;ForSyDe-Atom.html#lee98 [Lee98]&gt; states that: "when tags are</span>
<a name="line-30"></a>  <span class='hs-comment'>-- partially ordered rather than totally ordered, we say that the</span>
<a name="line-31"></a>  <span class='hs-comment'>-- system is untimed. Untimed systems cannot have the same notion of</span>
<a name="line-32"></a>  <span class='hs-comment'>-- causality as timed systems [see 'ForSyDe.Atom.MoC.SY.SY']. (...)</span>
<a name="line-33"></a>  <span class='hs-comment'>-- Processes defined in terms of constraints on the tags in the</span>
<a name="line-34"></a>  <span class='hs-comment'>-- signals (...) have a /consistent cut/ rather than</span>
<a name="line-35"></a>  <span class='hs-comment'>-- /simultaneity/."  Regarding SDF, it states that "is a special</span>
<a name="line-36"></a>  <span class='hs-comment'>-- case of Kahn process networks</span>
<a name="line-37"></a>  <span class='hs-comment'>-- &lt;ForSyDe-Atom.html#kahn76 [Kahn76]&gt;. A dataflow process is a Kahn</span>
<a name="line-38"></a>  <span class='hs-comment'>-- process that is also sequential, where the events on the</span>
<a name="line-39"></a>  <span class='hs-comment'>-- self-loop signal denote the firings of the dataflow actor. The</span>
<a name="line-40"></a>  <span class='hs-comment'>-- firing rules of a dataflow actor are partial ordering constraints</span>
<a name="line-41"></a>  <span class='hs-comment'>-- between these events and events on the inputs. (...)</span>
<a name="line-42"></a>  <span class='hs-comment'>-- Produced/consumed events are defined in terms of relations with</span>
<a name="line-43"></a>  <span class='hs-comment'>-- the events in the firing signal. It results that for the same</span>
<a name="line-44"></a>  <span class='hs-comment'>-- firing /i/, e&amp;#7522; &lt; e&amp;#8338;, as an intuitive sort of</span>
<a name="line-45"></a>  <span class='hs-comment'>-- causality constraint."</span>
<a name="line-46"></a>  <span class='hs-comment'>--</span>
<a name="line-47"></a>  <span class='hs-comment'>-- Based on the above insights, we can formulate a simplified</span>
<a name="line-48"></a>  <span class='hs-comment'>-- definition of the @forsyde-atom@ interpretation of SDF:</span>
<a name="line-49"></a>  <span class='hs-comment'>--</span>
<a name="line-50"></a>  <span class='hs-comment'>-- [The SDF MoC] is abstracting the execution semantics of a system</span>
<a name="line-51"></a>  <span class='hs-comment'>-- where computation is performed according to firing rules where</span>
<a name="line-52"></a>  <span class='hs-comment'>-- the production and the consumption rates are fixed.</span>
<a name="line-53"></a>  <span class='hs-comment'>--</span>
<a name="line-54"></a>  <span class='hs-comment'>-- Below is a /possible/ behavior in time of the input and the</span>
<a name="line-55"></a>  <span class='hs-comment'>-- output signals of a SDF process. Events sharing the same partial</span>
<a name="line-56"></a>  <span class='hs-comment'>-- ordering in relation to one firing are overlined:</span>
<a name="line-57"></a>  <span class='hs-comment'>--</span>
<a name="line-58"></a>  <span class='hs-comment'>-- &lt;&lt;fig/moc-sdf-example.png&gt;&gt;</span>
<a name="line-59"></a>  <span class='hs-comment'>--</span>
<a name="line-60"></a>  <span class='hs-comment'>-- Implementing the SDF tag system implied a series of engineering</span>
<a name="line-61"></a>  <span class='hs-comment'>-- decisions which lead to the following particularities:</span>
<a name="line-62"></a>  <span class='hs-comment'>--</span>
<a name="line-63"></a>  <span class='hs-comment'>-- 1. signals represent FIFO channels, and tags are implicit from</span>
<a name="line-64"></a>  <span class='hs-comment'>-- their position in the 'ForSyDe.Atom.MoC.Stream.Stream'</span>
<a name="line-65"></a>  <span class='hs-comment'>-- structure. Internally, 'ForSyDe.Atom.MoC.SDF.SDF' signals have</span>
<a name="line-66"></a>  <span class='hs-comment'>-- exactly the same structure as 'ForSyDe.Atom.MoC.SY.SY' signals,</span>
<a name="line-67"></a>  <span class='hs-comment'>-- whereas the partial ordering is imposed by the processes alone.</span>
<a name="line-68"></a>  <span class='hs-comment'>--</span>
<a name="line-69"></a>  <span class='hs-comment'>-- 1. the 'ForSyDe.Atom.MoC.SDF.SDF' event constructor wraps only a</span>
<a name="line-70"></a>  <span class='hs-comment'>-- value.</span>
<a name="line-71"></a>  <span class='hs-comment'>--</span>
<a name="line-72"></a>  <span class='hs-comment'>-- 1. being an /untimed MoC/, the order between events is partial to</span>
<a name="line-73"></a>  <span class='hs-comment'>-- the firings of processes. An SDF atom will fire only when there</span>
<a name="line-74"></a>  <span class='hs-comment'>-- are enough events to trigger its inputs. Once a firing occurs, it</span>
<a name="line-75"></a>  <span class='hs-comment'>-- will take care of partitioning the input or output signals.</span>
<a name="line-76"></a>  <span class='hs-comment'>--</span>
<a name="line-77"></a>  <span class='hs-comment'>-- 1. SDF atoms /do/ require a context: the consumption /c/ and</span>
<a name="line-78"></a>  <span class='hs-comment'>-- production /p/ rates. Also, the functions passed as arguments</span>
<a name="line-79"></a>  <span class='hs-comment'>-- reflect the fact that multiple events are handled during a</span>
<a name="line-80"></a>  <span class='hs-comment'>-- firing.</span>
<a name="line-81"></a>  <span class='hs-comment'>--</span>
<a name="line-82"></a>  <span class='hs-comment'>-- 1. the previous statement can be synthesized into the following</span>
<a name="line-83"></a>  <span class='hs-comment'>-- &lt;ForSyDe-Atom-MoC.html#context execution context&gt;, which also</span>
<a name="line-84"></a>  <span class='hs-comment'>-- justifies the SDF implementation of 'ForSyDe.Atom.MoC.Fun' and</span>
<a name="line-85"></a>  <span class='hs-comment'>-- for 'ForSyDe.Atom.MoC.Ret':</span>
<a name="line-86"></a>  <span class='hs-comment'>--</span>
<a name="line-87"></a>  <span class='hs-comment'>-- &lt;&lt;fig/eqs-moc-sdf-context.png&gt;&gt;</span>
<a name="line-88"></a>  
<a name="line-89"></a>  <span class='hs-conid'>SDF</span><span class='hs-layout'>(</span><span class='hs-keyglyph'>..</span><span class='hs-layout'>)</span><span class='hs-layout'>,</span>
<a name="line-90"></a>  
<a name="line-91"></a>  <span class='hs-comment'>-- * Aliases &amp; utilities</span>
<a name="line-92"></a>
<a name="line-93"></a>  <span class='hs-comment'>-- | A set of type synonyms and utilities are provided for</span>
<a name="line-94"></a>  <span class='hs-comment'>-- convenience. The API type signatures will feature these aliases</span>
<a name="line-95"></a>  <span class='hs-comment'>-- to hide the cumbersome construction of atoms and patters as seen</span>
<a name="line-96"></a>  <span class='hs-comment'>-- in "ForSyDe.Atom.MoC".</span>
<a name="line-97"></a>
<a name="line-98"></a>  <span class='hs-conid'>Signal</span><span class='hs-layout'>,</span> <span class='hs-conid'>Prod</span><span class='hs-layout'>,</span> <span class='hs-conid'>Cons</span><span class='hs-layout'>,</span> <span class='hs-varid'>signal</span><span class='hs-layout'>,</span> <span class='hs-varid'>readSignal</span><span class='hs-layout'>,</span>
<a name="line-99"></a>
<a name="line-100"></a>  <span class='hs-comment'>-- | These SY process constructors are basically specific</span>
<a name="line-101"></a>  <span class='hs-comment'>-- instantiations of the patterns of atoms defined in</span>
<a name="line-102"></a>  <span class='hs-comment'>-- "ForSyDe.Atom.MoC". Some are also wrapping functions in an</span>
<a name="line-103"></a>  <span class='hs-comment'>-- extended behavioural model.</span>
<a name="line-104"></a>
<a name="line-105"></a>  <span class='hs-comment'>-- ** Simple</span>
<a name="line-106"></a>
<a name="line-107"></a>  <span class='hs-varid'>delay</span><span class='hs-layout'>,</span> <span class='hs-varid'>delay'</span><span class='hs-layout'>,</span> 
<a name="line-108"></a>  
<a name="line-109"></a>  <span class='hs-varid'>comb11</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb12</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb13</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb14</span><span class='hs-layout'>,</span>
<a name="line-110"></a>  <span class='hs-varid'>comb21</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb22</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb23</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb24</span><span class='hs-layout'>,</span>
<a name="line-111"></a>  <span class='hs-varid'>comb31</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb32</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb33</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb34</span><span class='hs-layout'>,</span>
<a name="line-112"></a>  <span class='hs-varid'>comb41</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb42</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb43</span><span class='hs-layout'>,</span> <span class='hs-varid'>comb44</span><span class='hs-layout'>,</span>
<a name="line-113"></a>
<a name="line-114"></a>  <span class='hs-varid'>reconfig11</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig12</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig13</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig14</span><span class='hs-layout'>,</span>
<a name="line-115"></a>  <span class='hs-varid'>reconfig21</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig22</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig23</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig24</span><span class='hs-layout'>,</span>
<a name="line-116"></a>  <span class='hs-varid'>reconfig31</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig32</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig33</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig34</span><span class='hs-layout'>,</span>
<a name="line-117"></a>  <span class='hs-varid'>reconfig41</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig42</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig43</span><span class='hs-layout'>,</span> <span class='hs-varid'>reconfig44</span><span class='hs-layout'>,</span>
<a name="line-118"></a>  
<a name="line-119"></a>  <span class='hs-varid'>constant1</span><span class='hs-layout'>,</span> <span class='hs-varid'>constant2</span><span class='hs-layout'>,</span> <span class='hs-varid'>constant3</span><span class='hs-layout'>,</span> <span class='hs-varid'>constant4</span><span class='hs-layout'>,</span>
<a name="line-120"></a>
<a name="line-121"></a>  <span class='hs-varid'>generate1</span><span class='hs-layout'>,</span> <span class='hs-varid'>generate2</span><span class='hs-layout'>,</span> <span class='hs-varid'>generate3</span><span class='hs-layout'>,</span> <span class='hs-varid'>generate4</span><span class='hs-layout'>,</span>
<a name="line-122"></a>
<a name="line-123"></a>  <span class='hs-varid'>stated11</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated12</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated13</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated14</span><span class='hs-layout'>,</span>
<a name="line-124"></a>  <span class='hs-varid'>stated21</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated22</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated23</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated24</span><span class='hs-layout'>,</span>
<a name="line-125"></a>  <span class='hs-varid'>stated31</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated32</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated33</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated34</span><span class='hs-layout'>,</span>
<a name="line-126"></a>  <span class='hs-varid'>stated41</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated42</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated43</span><span class='hs-layout'>,</span> <span class='hs-varid'>stated44</span><span class='hs-layout'>,</span>
<a name="line-127"></a>
<a name="line-128"></a>  <span class='hs-varid'>state11</span><span class='hs-layout'>,</span> <span class='hs-varid'>state12</span><span class='hs-layout'>,</span> <span class='hs-varid'>state13</span><span class='hs-layout'>,</span> <span class='hs-varid'>state14</span><span class='hs-layout'>,</span>
<a name="line-129"></a>  <span class='hs-varid'>state21</span><span class='hs-layout'>,</span> <span class='hs-varid'>state22</span><span class='hs-layout'>,</span> <span class='hs-varid'>state23</span><span class='hs-layout'>,</span> <span class='hs-varid'>state24</span><span class='hs-layout'>,</span>
<a name="line-130"></a>  <span class='hs-varid'>state31</span><span class='hs-layout'>,</span> <span class='hs-varid'>state32</span><span class='hs-layout'>,</span> <span class='hs-varid'>state33</span><span class='hs-layout'>,</span> <span class='hs-varid'>state34</span><span class='hs-layout'>,</span>
<a name="line-131"></a>  <span class='hs-varid'>state41</span><span class='hs-layout'>,</span> <span class='hs-varid'>state42</span><span class='hs-layout'>,</span> <span class='hs-varid'>state43</span><span class='hs-layout'>,</span> <span class='hs-varid'>state44</span><span class='hs-layout'>,</span>
<a name="line-132"></a>
<a name="line-133"></a>  <span class='hs-varid'>moore11</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore12</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore13</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore14</span><span class='hs-layout'>,</span>
<a name="line-134"></a>  <span class='hs-varid'>moore21</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore22</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore23</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore24</span><span class='hs-layout'>,</span>
<a name="line-135"></a>  <span class='hs-varid'>moore31</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore32</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore33</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore34</span><span class='hs-layout'>,</span>
<a name="line-136"></a>  <span class='hs-varid'>moore41</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore42</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore43</span><span class='hs-layout'>,</span> <span class='hs-varid'>moore44</span><span class='hs-layout'>,</span>
<a name="line-137"></a>
<a name="line-138"></a>  <span class='hs-varid'>mealy11</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy12</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy13</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy14</span><span class='hs-layout'>,</span>
<a name="line-139"></a>  <span class='hs-varid'>mealy21</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy22</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy23</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy24</span><span class='hs-layout'>,</span>
<a name="line-140"></a>  <span class='hs-varid'>mealy31</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy32</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy33</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy34</span><span class='hs-layout'>,</span>
<a name="line-141"></a>  <span class='hs-varid'>mealy41</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy42</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy43</span><span class='hs-layout'>,</span> <span class='hs-varid'>mealy44</span><span class='hs-layout'>,</span>
<a name="line-142"></a>
<a name="line-143"></a>  <span class='hs-comment'>-- ** Interfaces</span>
<a name="line-144"></a>
<a name="line-145"></a>  <span class='hs-varid'>toSY1</span><span class='hs-layout'>,</span> <span class='hs-varid'>toSY2</span><span class='hs-layout'>,</span> <span class='hs-varid'>toSY3</span><span class='hs-layout'>,</span> <span class='hs-varid'>toSY4</span><span class='hs-layout'>,</span>
<a name="line-146"></a>  <span class='hs-varid'>zipx</span><span class='hs-layout'>,</span> <span class='hs-varid'>unzipx</span>  
<a name="line-147"></a>
<a name="line-148"></a>  <span class='hs-layout'>)</span> <span class='hs-keyword'>where</span>
<a name="line-149"></a>
<a name="line-150"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>ForSyDe</span><span class='hs-varop'>.</span><span class='hs-conid'>Atom</span><span class='hs-varop'>.</span><span class='hs-conid'>MoC</span><span class='hs-varop'>.</span><span class='hs-conid'>SDF</span><span class='hs-varop'>.</span><span class='hs-conid'>Core</span>
<a name="line-151"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>ForSyDe</span><span class='hs-varop'>.</span><span class='hs-conid'>Atom</span><span class='hs-varop'>.</span><span class='hs-conid'>MoC</span><span class='hs-varop'>.</span><span class='hs-conid'>SDF</span><span class='hs-varop'>.</span><span class='hs-conid'>Lib</span>
<a name="line-152"></a><span class='hs-keyword'>import</span> <span class='hs-conid'>ForSyDe</span><span class='hs-varop'>.</span><span class='hs-conid'>Atom</span><span class='hs-varop'>.</span><span class='hs-conid'>MoC</span><span class='hs-varop'>.</span><span class='hs-conid'>SDF</span><span class='hs-varop'>.</span><span class='hs-conid'>Interface</span>
</pre></body>
</html>
